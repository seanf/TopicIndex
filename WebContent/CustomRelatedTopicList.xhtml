<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<ui:composition
	xmlns="http://www.w3.org/1999/xhtml"
	xmlns:s="http://jboss.com/products/seam/taglib"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:rich="http://richfaces.org/rich"
	xmlns:c="http://java.sun.com/jstl/core"
	template="layout/cleantemplate.xhtml">

	<ui:define name="body">

		<script
			src="#{facesContext.externalContext.requestContextPath}/filterscripts.js"></script>

		<rich:panel>
			<f:facet name="header">Topic ID: [#{relatedTopicTagsList.topicTopicId}] Title: #{relatedTopicTagsList.instance.topicTitle} - Currently Related Topics</f:facet>

			<rich:dataTable
				id="relatedOutgoingTopicsList"
				var="relatedTopic"
				value="#{relatedTopicTagsList.instance.oneWayRelatedTopicsArray}">
				<f:facet name="header">
					<h:outputText value="One Way Outgoing Relationships" />
				</f:facet>
				<h:column>
					<f:facet name="header">
						<h:outputText>ID</h:outputText>
					</f:facet>
					<h:outputText value="#{relatedTopic.topicId}" />
				</h:column>
				<h:column>
					<f:facet name="header">
						<h:outputText>Title</h:outputText>
					</f:facet>
					<h:outputText value="#{relatedTopic.topicTitle}" />
				</h:column>
			</rich:dataTable>

			<br />
			<br />

			<rich:dataTable
				id="relatedTwoWayTopicsList"
				var="relatedTopic"
				value="#{relatedTopicTagsList.instance.twoWayRelatedTopicsArray}">
				<f:facet name="header">
					<h:outputText value="Two Way Relationships" />
				</f:facet>
				<h:column>
					<h:outputText value="#{relatedTopic.topicId}" />
				</h:column>
				<h:column>
					<f:facet name="header">
						<h:outputText>Title</h:outputText>
					</f:facet>
					<h:outputText value="#{relatedTopic.topicTitle}" />
				</h:column>
			</rich:dataTable>

			<br />
			<br />

			<rich:dataTable
				id="relatedIncomingTopicsList"
				var="relatedTopic"
				value="#{relatedTopicTagsList.instance.incomingRelatedTopicsArray}">
				<f:facet name="header">
					<h:outputText value="One Way Incoming Relationships" />
				</f:facet>
				<h:column>
					<f:facet name="header">
						<h:outputText>ID</h:outputText>
					</f:facet>
					<h:outputText value="#{relatedTopic.topicId}" />
				</h:column>
				<h:column>
					<f:facet name="header">
						<h:outputText>Title</h:outputText>
					</f:facet>
					<h:outputText value="#{relatedTopic.topicTitle}" />
				</h:column>
			</rich:dataTable>

		</rich:panel>

		<br />
		<br />

		<rich:simpleTogglePanel
			switchType="client"
			opened="false">
			<f:facet name="header">Filters and Search</f:facet>

			<h:form
				id="topicSearch"
				styleClass="edit">

				<div class="actionButtons">
					<h:commandButton
						id="searchTop"
						value="Search"
						action="#{relatedTopicTagsList.doSearch()}" />
				</div>

				<br />
				<br />
				<br />

				<rich:panel>
					<f:facet name="header">Topic Tag Filter</f:facet>

					<ui:include src="/WEB-INF/templates/TagSelectAndNotSelect.xhtml">
						<ui:param
							name="selectedTags"
							value="#{relatedTopicTagsList.selectedTags.projectCategories}" />
						<ui:param
							name="logicEnabled"
							value="#{true}" />
					</ui:include>

				</rich:panel>

				<br />
				<br />

				<rich:panel>
					<f:facet name="header">Topic Search Filter</f:facet>

					<h:panelGrid
						id="grid"
						columns="1">
						<h:panelGroup>

							<s:decorate
								template="layout/display.xhtml"
								rendered="#{s:hasPermission('FilterTopicDates', 'Rendered', null)}">
								<ui:define name="label">Topic Created After</ui:define>
								<rich:calendar
									value="#{relatedTopicTagsList.topic.startCreateDate}"
									locale="AU"
									popup="true"
									datePattern="dd MMM yyyy HH:mm"
									showApplyButton="true"
									cellWidth="24px"
									cellHeight="22px"
									style="width:200px" />
							</s:decorate>

							<s:decorate
								template="layout/display.xhtml"
								rendered="#{s:hasPermission('FilterTopicDates', 'Rendered', null)}">
								<ui:define name="label">Topic Created Before</ui:define>
								<rich:calendar
									value="#{relatedTopicTagsList.topic.endCreateDate}"
									locale="AU"
									popup="true"
									datePattern="dd MMM yyyy HH:mm"
									showApplyButton="true"
									cellWidth="24px"
									cellHeight="22px"
									style="width:200px" />
							</s:decorate>

							<s:decorate
								template="layout/display.xhtml"
								rendered="#{s:hasPermission('FilterTopicID', 'Rendered', null)}">
								<ui:define name="label">Topic ID</ui:define>
								<h:inputText
									id="topicID"
									value="#{relatedTopicTagsList.topic.topicIdsString}" />
							</s:decorate>

							<s:decorate
								template="layout/display.xhtml"
								rendered="#{s:hasPermission('FilterTopicAddedBy', 'Rendered', null)}">
								<ui:define name="label">Topic Added By</ui:define>
								<h:inputText
									id="topicAddedBy"
									value="#{relatedTopicTagsList.topic.topicAddedBy}" />
							</s:decorate>

							<s:decorate
								template="layout/display.xhtml"
								rendered="#{s:hasPermission('FilterTopicTitle', 'Rendered', null)}">
								<ui:define name="label">Topic Title</ui:define>
								<h:inputText
									id="topicTitle"
									value="#{relatedTopicTagsList.topic.topicTitle}" />
							</s:decorate>

							<s:decorate
								template="layout/display.xhtml"
								rendered="#{s:hasPermission('FilterTopicText', 'Rendered', null)}">
								<ui:define name="label">Topic Description</ui:define>
								<h:inputText
									id="topicText"
									value="#{relatedTopicTagsList.topic.topicText}" />
							</s:decorate>

							<s:decorate
								template="layout/display.xhtml"
								rendered="#{s:hasPermission('FilterTopicHasRelationships', 'Rendered', null)}">
								<ui:define name="label">Has Related Topics</ui:define>
								<h:selectBooleanCheckbox
									id="hasRelationships"
									value="#{relatedTopicTagsList.topic.hasRelationships}" />
							</s:decorate>

							<s:decorate template="layout/display.xhtml">
								<ui:define name="label">Match</ui:define>
								<h:selectOneRadio
									id="logic"
									value="#{relatedTopicTagsList.topic.logic}"
									styleClass="radio">
									<f:selectItem
										itemLabel="All"
										itemValue="and" />
									<f:selectItem
										itemLabel="Any"
										itemValue="or" />
								</h:selectOneRadio>
							</s:decorate>
						</h:panelGroup>

					</h:panelGrid>

				</rich:panel>

				<br />
				<br />

				<div class="actionButtons">
					<h:commandButton
						id="searchBottom"
						value="Search"
						action="#{relatedTopicTagsList.doSearch()}" />
				</div>

			</h:form>

		</rich:simpleTogglePanel>

		<br />
		<br />

		<rich:panel>
			<f:facet name="header">Topic Search Results (#{empty relatedTopicTagsList.resultList ? 0 : (relatedTopicTagsList.paginated ? relatedTopicTagsList.resultCount : relatedTopicTagsList.resultList.size)}) #{relatedTopicTagsList.searchTagHeading}</f:facet>

			<h:panelGrid
				id="bulkActionButtons"
				columns="7"
				border="0">
				<s:button
					action="#{relatedTopicTagsList.finish()}"
					value="Done">
					<c:forEach
						items="#{relatedTopicTagsList.filterVars}"
						var="filtervar">
						<f:param
							name="#{filtervar.key}"
							value="#{filtervar.value}" />
					</c:forEach>
				</s:button>
				<s:button
					action="#{relatedTopicTagsList.oneWayToAll()}"
					value="Create One Way Link To All Topics"
					title="This will create a link from the main topic to those listed below. This will not affect relationships between topics that don't match the current filter.">
					<c:forEach
						items="#{relatedTopicTagsList.filterVars}"
						var="filtervar">
						<f:param
							name="#{filtervar.key}"
							value="#{filtervar.value}" />
					</c:forEach>
				</s:button>
				<s:button
					action="#{relatedTopicTagsList.oneWayFromAll()}"
					value="Create One Way Link From All Topics"
					title="This will create a link from those topics listed below to the main topic. This will not affect relationships between topics that don't match the current filter.">
					<c:forEach
						items="#{relatedTopicTagsList.filterVars}"
						var="filtervar">
						<f:param
							name="#{filtervar.key}"
							value="#{filtervar.value}" />
					</c:forEach>
				</s:button>
				<s:button
					action="#{relatedTopicTagsList.twoWayWithAll()}"
					value="Create Two Way Link With All Topics"
					title="This will create two way links between the main topic and those listed below. This will not affect relationships between topics that don't match the current filter.">
					<c:forEach
						items="#{relatedTopicTagsList.filterVars}"
						var="filtervar">
						<f:param
							name="#{filtervar.key}"
							value="#{filtervar.value}" />
					</c:forEach>
				</s:button>
				<s:button
					action="#{relatedTopicTagsList.removeToAll()}"
					value="Remove All Links To Topics"
					title="This will remove all links from the main topic to those topics that are listed below. This will not affect relationships between topics that don't match the current filter.">
					<c:forEach
						items="#{relatedTopicTagsList.filterVars}"
						var="filtervar">
						<f:param
							name="#{filtervar.key}"
							value="#{filtervar.value}" />
					</c:forEach>
				</s:button>
				<s:button
					action="#{relatedTopicTagsList.removeFromAll()}"
					value="Remove All Links From Topics"
					title="This will remove all links from the topics that are listed below to the main topic. This will not affect relationships between topics that don't match the current filter.">
					<c:forEach
						items="#{relatedTopicTagsList.filterVars}"
						var="filtervar">
						<f:param
							name="#{filtervar.key}"
							value="#{filtervar.value}" />
					</c:forEach>
				</s:button>
				<s:button
					action="#{relatedTopicTagsList.removeBetweenAll()}"
					value="Remove All Links To and From Topics"
					title="This will remove all links between the main topic and those that are listed below. This will not affect relationships between topics that don't match the current filter.">
					<c:forEach
						items="#{relatedTopicTagsList.filterVars}"
						var="filtervar">
						<f:param
							name="#{filtervar.key}"
							value="#{filtervar.value}" />
					</c:forEach>
				</s:button>
			</h:panelGrid>

			<div class="tableControl">

				<s:link
					view="/CustomRelatedTopicList.xhtml"
					rendered="#{relatedTopicTagsList.previousExists}"
					value="#{messages.left}#{messages.left} First Page"
					id="firstPageTop">
					<f:param
						name="firstResult"
						value="0" />
					<c:forEach
						items="#{relatedTopicTagsList.filterVars}"
						var="filtervar">
						<f:param
							name="#{filtervar.key}"
							value="#{filtervar.value}" />
					</c:forEach>
				</s:link>

				<s:link
					view="/CustomRelatedTopicList.xhtml"
					rendered="#{relatedTopicTagsList.previousExists}"
					value="#{messages.left} Previous Page"
					id="previousPageTop">
					<f:param
						name="firstResult"
						value="#{relatedTopicTagsList.previousFirstResult}" />
					<c:forEach
						items="#{relatedTopicTagsList.filterVars}"
						var="filtervar">
						<f:param
							name="#{filtervar.key}"
							value="#{filtervar.value}" />
					</c:forEach>
				</s:link>

				<s:link
					view="/CustomRelatedTopicList.xhtml"
					rendered="#{relatedTopicTagsList.nextExists}"
					value="Next Page #{messages.right}"
					id="nextPageTop">
					<f:param
						name="firstResult"
						value="#{relatedTopicTagsList.nextFirstResult}" />
					<c:forEach
						items="#{relatedTopicTagsList.filterVars}"
						var="filtervar">
						<f:param
							name="#{filtervar.key}"
							value="#{filtervar.value}" />
					</c:forEach>
				</s:link>

				<s:link
					view="/CustomRelatedTopicList.xhtml"
					rendered="#{relatedTopicTagsList.nextExists}"
					value="Last Page #{messages.right}#{messages.right}"
					id="lastPageTop">
					<f:param
						name="firstResult"
						value="#{relatedTopicTagsList.lastFirstResult}" />
					<c:forEach
						items="#{relatedTopicTagsList.filterVars}"
						var="filtervar">
						<f:param
							name="#{filtervar.key}"
							value="#{filtervar.value}" />
					</c:forEach>
				</s:link>

			</div>

			<br />

			<div
				class="results"
				id="relatedTopicTagsList">

				<h:outputText
					value="The topic search returned no results."
					rendered="#{empty relatedTopicTagsList.resultList}" />

				<rich:dataTable
					id="relatedTopicTagsList"
					var="_topic"
					value="#{relatedTopicTagsList.resultList}"
					rendered="#{not empty relatedTopicTagsList.resultList}"
					styleClass="listTable"
					columnsWidth="200px, 50px, 150px, 1*, 75px, 150px, 150px"
					columnClasses=" , , , longText, , , ">


					<h:column>
						<f:facet name="header">
							<h:outputText>Actions</h:outputText>
						</f:facet>

						<h:form>
							<!-- 2 way link exists -->
							<h:commandLink
								id="twowaylinkremovetoreturn"
								title="Create a relationship from #{relatedTopicTagsList.topicTopicId} to #{_topic.topicId}, and return to the search screen"
								value="Convert To 1 Way To Here"
								action="#{relatedTopicTagsList.removeRelationship(_topic.topicId, true, false, true)}"
								rendered="#{relatedTopicTagsList.isRelatedBothWays(_topic.topicId) and relatedTopicTagsList.topicTopicId ne _topic.topicId}"
								class="relatedTopicLink">
								<c:forEach
									items="#{relatedTopicTagsList.filterVars}"
									var="filtervar">
									<f:param
										name="#{filtervar.key}"
										value="#{filtervar.value}" />
								</c:forEach>
							</h:commandLink>
				            #{" "}
				            <h:commandLink
								id="twowaylinkremovetocontinue"
								title="Create a relationship from #{relatedTopicTagsList.topicTopicId} to #{_topic.topicId}, and return to this screen"
								value="&amp; Continue"
								action="#{relatedTopicTagsList.removeRelationship(_topic.topicId, true, false, false)}"
								rendered="#{relatedTopicTagsList.isRelatedBothWays(_topic.topicId) and relatedTopicTagsList.topicTopicId ne _topic.topicId}"
								class="relatedTopicLink">
								<c:forEach
									items="#{relatedTopicTagsList.filterVars}"
									var="filtervar">
									<f:param
										name="#{filtervar.key}"
										value="#{filtervar.value}" />
								</c:forEach>
							</h:commandLink>

							<!--  no link exists -->
							<h:commandLink
								id="nolinkcreatetoreturn"
								title="Add a relationship from #{_topic.topicId} to #{relatedTopicTagsList.topicTopicId}, and return to the search screen"
								value="Create 1 Way From Here"
								action="#{relatedTopicTagsList.createRelationship(_topic.topicId, true, false, true)}"
								rendered="#{relatedTopicTagsList.isNotRelated(_topic.topicId) and relatedTopicTagsList.topicTopicId ne _topic.topicId}"
								class="relatedTopicLink">
								<c:forEach
									items="#{relatedTopicTagsList.filterVars}"
									var="filtervar">
									<f:param
										name="#{filtervar.key}"
										value="#{filtervar.value}" />
								</c:forEach>
							</h:commandLink>
				            #{" "}
				            <h:commandLink
								id="nolinkcreatetocontinue"
								title="Add a relationship from #{_topic.topicId} to #{relatedTopicTagsList.topicTopicId}, and return to this screen"
								value="&amp; Continue"
								action="#{relatedTopicTagsList.createRelationship(_topic.topicId, true, false, false)}"
								rendered="#{relatedTopicTagsList.isNotRelated(_topic.topicId) and relatedTopicTagsList.topicTopicId ne _topic.topicId}"
								class="relatedTopicLink">
								<c:forEach
									items="#{relatedTopicTagsList.filterVars}"
									var="filtervar">
									<f:param
										name="#{filtervar.key}"
										value="#{filtervar.value}" />
								</c:forEach>
							</h:commandLink>

							<!-- relationship exists to xor from this topic -->
							<h:commandLink
								id="onewaylinkcreatetwowayreturn"
								title="Make the relationship between #{_topic.topicId} and #{relatedTopicTagsList.topicTopicId} two way, and return to the search screen"
								value="Create 2 Way Relationship"
								action="#{relatedTopicTagsList.createRelationship(_topic.topicId, true, true, true)}"
								rendered="#{relatedTopicTagsList.isRelatedOneWay(_topic.topicId) and relatedTopicTagsList.topicTopicId ne _topic.topicId}"
								class="relatedTopicLink">
								<c:forEach
									items="#{relatedTopicTagsList.filterVars}"
									var="filtervar">
									<f:param
										name="#{filtervar.key}"
										value="#{filtervar.value}" />
								</c:forEach>
							</h:commandLink>
				            #{" "}
				            <h:commandLink
								id="onewaylinkcreatetwowaycontinue"
								title="Make the relationship between #{_topic.topicId} and #{relatedTopicTagsList.topicTopicId} two way, and return to this screen"
								value="&amp; Continue"
								action="#{relatedTopicTagsList.createRelationship(_topic.topicId, true, true, false)}"
								rendered="#{relatedTopicTagsList.isRelatedOneWay(_topic.topicId) and relatedTopicTagsList.topicTopicId ne _topic.topicId}"
								class="relatedTopicLink">
								<c:forEach
									items="#{relatedTopicTagsList.filterVars}"
									var="filtervar">
									<f:param
										name="#{filtervar.key}"
										value="#{filtervar.value}" />
								</c:forEach>
							</h:commandLink>

							<br />

							<!-- 2 way link exists -->
							<h:commandLink
								id="twowaylinkremovefromreturn"
								title="Convert to a relationship from #{_topic.topicId} to #{relatedTopicTagsList.topicTopicId}, and return to the search screen"
								value="Convert To 1 Way From Here"
								action="#{relatedTopicTagsList.removeRelationship(_topic.topicId, false, true, true)}"
								rendered="#{relatedTopicTagsList.isRelatedBothWays(_topic.topicId) and relatedTopicTagsList.topicTopicId ne _topic.topicId}"
								class="relatedTopicLink">
								<c:forEach
									items="#{relatedTopicTagsList.filterVars}"
									var="filtervar">
									<f:param
										name="#{filtervar.key}"
										value="#{filtervar.value}" />
								</c:forEach>
							</h:commandLink>
				            #{" "}
				            <h:commandLink
								id="twowaylinkremovefromcontinue"
								title="Convert to a relationship from #{_topic.topicId} to #{relatedTopicTagsList.topicTopicId}, and return to this screen"
								value="&amp; Continue"
								action="#{relatedTopicTagsList.removeRelationship(_topic.topicId, false, true, false)}"
								rendered="#{relatedTopicTagsList.isRelatedBothWays(_topic.topicId) and relatedTopicTagsList.topicTopicId ne _topic.topicId}"
								class="relatedTopicLink">
								<c:forEach
									items="#{relatedTopicTagsList.filterVars}"
									var="filtervar">
									<f:param
										name="#{filtervar.key}"
										value="#{filtervar.value}" />
								</c:forEach>
							</h:commandLink>

							<!--  no link exists -->
							<h:commandLink
								id="nolinkcreatefromreturn"
								title="Create a relationship from #{relatedTopicTagsList.topicTopicId} to #{_topic.topicId}, and return to the search screen"
								value="Create 1 Way To Here"
								action="#{relatedTopicTagsList.createRelationship(_topic.topicId, false, true, true)}"
								rendered="#{relatedTopicTagsList.isNotRelated(_topic.topicId) and relatedTopicTagsList.topicTopicId ne _topic.topicId}"
								class="relatedTopicLink">
								<c:forEach
									items="#{relatedTopicTagsList.filterVars}"
									var="filtervar">
									<f:param
										name="#{filtervar.key}"
										value="#{filtervar.value}" />
								</c:forEach>
							</h:commandLink>
				            #{" "}
				            <h:commandLink
								id="nolinkcreatefromcontinue"
								title="Create a relationship from #{relatedTopicTagsList.topicTopicId} to #{_topic.topicId}, and return to this screen"
								value="&amp; Continue"
								action="#{relatedTopicTagsList.createRelationship(_topic.topicId, false, true, false)}"
								rendered="#{relatedTopicTagsList.isNotRelated(_topic.topicId) and relatedTopicTagsList.topicTopicId ne _topic.topicId}"
								class="relatedTopicLink">
								<c:forEach
									items="#{relatedTopicTagsList.filterVars}"
									var="filtervar">
									<f:param
										name="#{filtervar.key}"
										value="#{filtervar.value}" />
								</c:forEach>
							</h:commandLink>

							<!-- relationship exists to this topic -->
							<h:commandLink
								id="fromlinkremovereturn"
								title="Remove the relationship from #{relatedTopicTagsList.topicTopicId} to #{_topic.topicId}, and return to this screen"
								value="Remove Relationship To Here"
								action="#{relatedTopicTagsList.removeRelationship(_topic.topicId, true, true, true)}"
								rendered="#{relatedTopicTagsList.isRelatedOneWay(_topic.topicId) and relatedTopicTagsList.isRelatedTo(_topic.topicId)  and relatedTopicTagsList.topicTopicId ne _topic.topicId}"
								class="relatedTopicLink">
								<c:forEach
									items="#{relatedTopicTagsList.filterVars}"
									var="filtervar">
									<f:param
										name="#{filtervar.key}"
										value="#{filtervar.value}" />
								</c:forEach>
							</h:commandLink>			            
				            #{" "}
				            <h:commandLink
								id="fromlinkremovecontinue"
								title="Remove the relationship from #{relatedTopicTagsList.topicTopicId} to #{_topic.topicId}, and return to this screen"
								value="&amp; Continue"
								action="#{relatedTopicTagsList.removeRelationship(_topic.topicId, true, true, false)}"
								rendered="#{relatedTopicTagsList.isRelatedOneWay(_topic.topicId) and relatedTopicTagsList.isRelatedTo(_topic.topicId)  and relatedTopicTagsList.topicTopicId ne _topic.topicId}"
								class="relatedTopicLink">
								<c:forEach
									items="#{relatedTopicTagsList.filterVars}"
									var="filtervar">
									<f:param
										name="#{filtervar.key}"
										value="#{filtervar.value}" />
								</c:forEach>
							</h:commandLink>

							<h:commandLink
								id="tolinkremovereturn"
								title="Remove the relationship from #{_topic.topicId} to #{relatedTopicTagsList.topicTopicId}, and return to this screen"
								value="Remove Relationship From Here"
								action="#{relatedTopicTagsList.removeRelationship(_topic.topicId, true, true, true)}"
								rendered="#{relatedTopicTagsList.isRelatedOneWay(_topic.topicId) and relatedTopicTagsList.isRelatedFrom(_topic.topicId)  and relatedTopicTagsList.topicTopicId ne _topic.topicId}"
								class="relatedTopicLink">
								<c:forEach
									items="#{relatedTopicTagsList.filterVars}"
									var="filtervar">
									<f:param
										name="#{filtervar.key}"
										value="#{filtervar.value}" />
								</c:forEach>
							</h:commandLink>			            
				            #{" "}
				            <h:commandLink
								id="tolinkremovecontinue"
								title="Remove the relationship from #{_topic.topicId} to #{relatedTopicTagsList.topicTopicId}, and return to this screen"
								value="&amp; Continue"
								action="#{relatedTopicTagsList.removeRelationship(_topic.topicId, true, true, false)}"
								rendered="#{relatedTopicTagsList.isRelatedOneWay(_topic.topicId) and relatedTopicTagsList.isRelatedFrom(_topic.topicId)  and relatedTopicTagsList.topicTopicId ne _topic.topicId}"
								class="relatedTopicLink">
								<c:forEach
									items="#{relatedTopicTagsList.filterVars}"
									var="filtervar">
									<f:param
										name="#{filtervar.key}"
										value="#{filtervar.value}" />
								</c:forEach>
							</h:commandLink>

							<br />

							<!-- 2 way link exists -->
							<h:commandLink
								id="twowaylinkremoveallreturn"
								title="Remove all relationships between #{relatedTopicTagsList.topicTopicId} and #{_topic.topicId}, and return to the search screen"
								value="Remove All Relationships"
								action="#{relatedTopicTagsList.removeRelationship(_topic.topicId, true, true, true)}"
								rendered="#{relatedTopicTagsList.isRelatedBothWays(_topic.topicId) and relatedTopicTagsList.topicTopicId ne _topic.topicId}"
								class="relatedTopicLink">
								<c:forEach
									items="#{relatedTopicTagsList.filterVars}"
									var="filtervar">
									<f:param
										name="#{filtervar.key}"
										value="#{filtervar.value}" />
								</c:forEach>
							</h:commandLink>
				            #{" "}
				            <h:commandLink
								id="twowaylinkremoveallcontinue"
								title="Remove all relationships between #{relatedTopicTagsList.topicTopicId} and #{_topic.topicId}, and return to this screen"
								value="&amp; Continue"
								action="#{relatedTopicTagsList.removeRelationship(_topic.topicId, true, true, false)}"
								rendered="#{relatedTopicTagsList.isRelatedBothWays(_topic.topicId) and relatedTopicTagsList.topicTopicId ne _topic.topicId}"
								class="relatedTopicLink">
								<c:forEach
									items="#{relatedTopicTagsList.filterVars}"
									var="filtervar">
									<f:param
										name="#{filtervar.key}"
										value="#{filtervar.value}" />
								</c:forEach>
							</h:commandLink>

							<!--  no link exists -->
							<h:commandLink
								id="nolinktwowayreturn"
								title="Add a two way relationship between #{relatedTopicTagsList.topicTopicId} and #{_topic.topicId}, and return to the search screen"
								value="Create a Two Way Relationship"
								action="#{relatedTopicTagsList.createRelationship(_topic.topicId, true, true, true)}"
								rendered="#{relatedTopicTagsList.isNotRelated(_topic.topicId) and relatedTopicTagsList.topicTopicId ne _topic.topicId}"
								class="relatedTopicLink">
								<c:forEach
									items="#{relatedTopicTagsList.filterVars}"
									var="filtervar">
									<f:param
										name="#{filtervar.key}"
										value="#{filtervar.value}" />
								</c:forEach>
							</h:commandLink>
				            #{" "}
				            <h:commandLink
								id="nolinktwowaycontinue"
								title="Add a two way relationship between #{relatedTopicTagsList.topicTopicId} and #{_topic.topicId}, and return to this screen"
								value="&amp; Continue"
								action="#{relatedTopicTagsList.createRelationship(_topic.topicId, true, true, false)}"
								rendered="#{relatedTopicTagsList.isNotRelated(_topic.topicId) and relatedTopicTagsList.topicTopicId ne _topic.topicId}"
								class="relatedTopicLink">
								<c:forEach
									items="#{relatedTopicTagsList.filterVars}"
									var="filtervar">
									<f:param
										name="#{filtervar.key}"
										value="#{filtervar.value}" />
								</c:forEach>
							</h:commandLink>
						</h:form>

					</h:column>


					<h:column>
						<f:facet name="header">
							<ui:include src="layout/sort.xhtml">
								<ui:param
									name="entityList"
									value="#{relatedTopicTagsList}" />
								<ui:param
									name="propertyLabel"
									value="ID" />
								<ui:param
									name="propertyPath"
									value="topic.topicId" />
							</ui:include>
						</f:facet>
						<h:outputText value="#{_topic.topicId}" />
					</h:column>

					<h:column
						rendered="#{s:hasPermission('RelatedTopicTagsListTitleColumn', 'Rendered', null)}">
						<f:facet name="header">
							<ui:include src="layout/sort.xhtml">
								<ui:param
									name="entityList"
									value="#{relatedTopicTagsList}" />
								<ui:param
									name="propertyLabel"
									value="Topic Title" />
								<ui:param
									name="propertyPath"
									value="topic.topicTitle" />
							</ui:include>
						</f:facet>
						<h:outputText value="#{_topic.topicTitle}" />
					</h:column>

					<h:column
						styleClass="longText"
						rendered="#{s:hasPermission('RelatedTopicTagsListTextColumn', 'Rendered', null)}">
						<f:facet name="header">
							<ui:include src="layout/sort.xhtml">
								<ui:param
									name="entityList"
									value="#{relatedTopicTagsList}" />
								<ui:param
									name="propertyLabel"
									value="Topic Text" />
								<ui:param
									name="propertyPath"
									value="topic.topicText" />
							</ui:include>
						</f:facet>
						<h:outputText value="#{_topic.topicText}" />
					</h:column>

					<h:column
						rendered="#{s:hasPermission('RelatedTopicTagsListAddedByColumn', 'Rendered', null)}">
						<f:facet name="header">
							<ui:include src="layout/sort.xhtml">
								<ui:param
									name="entityList"
									value="#{relatedTopicTagsList}" />
								<ui:param
									name="propertyLabel"
									value="Added By" />
								<ui:param
									name="propertyPath"
									value="topic.topicAddedBy" />
							</ui:include>
						</f:facet>
						<h:outputText value="#{_topic.topicAddedBy}" />
					</h:column>

					<h:column
						rendered="#{s:hasPermission('RelatedTopicTagsListRelatedTopicsColumn', 'Rendered', null)}">
						<f:facet name="header">
		                Related Topics
		            </f:facet>
						<h:outputText
							value="#{_topic.relatedTopicsList}"
							escape="false" />
					</h:column>

					<h:column
						rendered="#{s:hasPermission('RelatedTopicTagsListTagsColumn', 'Rendered', null)}">
						<f:facet name="header">
		                Topic Tags
		            </f:facet>
						<h:outputText
							value="#{_topic.tagsList}"
							escape="false" />
					</h:column>


				</rich:dataTable>

			</div>
		</rich:panel>

		<div class="tableControl">

			<s:link
				view="/CustomRelatedTopicList.xhtml"
				rendered="#{relatedTopicTagsList.previousExists}"
				value="#{messages.left}#{messages.left} First Page"
				id="firstPage">
				<f:param
					name="firstResult"
					value="0" />
				<c:forEach
					items="#{relatedTopicTagsList.filterVars}"
					var="filtervar">
					<f:param
						name="#{filtervar.key}"
						value="#{filtervar.value}" />
				</c:forEach>
			</s:link>

			<s:link
				view="/CustomRelatedTopicList.xhtml"
				rendered="#{relatedTopicTagsList.previousExists}"
				value="#{messages.left} Previous Page"
				id="previousPage">
				<f:param
					name="firstResult"
					value="#{relatedTopicTagsList.previousFirstResult}" />
				<c:forEach
					items="#{relatedTopicTagsList.filterVars}"
					var="filtervar">
					<f:param
						name="#{filtervar.key}"
						value="#{filtervar.value}" />
				</c:forEach>
			</s:link>

			<s:link
				view="/CustomRelatedTopicList.xhtml"
				rendered="#{relatedTopicTagsList.nextExists}"
				value="Next Page #{messages.right}"
				id="nextPage">
				<f:param
					name="firstResult"
					value="#{relatedTopicTagsList.nextFirstResult}" />
				<c:forEach
					items="#{relatedTopicTagsList.filterVars}"
					var="filtervar">
					<f:param
						name="#{filtervar.key}"
						value="#{filtervar.value}" />
				</c:forEach>
			</s:link>

			<s:link
				view="/CustomRelatedTopicList.xhtml"
				rendered="#{relatedTopicTagsList.nextExists}"
				value="Last Page #{messages.right}#{messages.right}"
				id="lastPage">
				<f:param
					name="firstResult"
					value="#{relatedTopicTagsList.lastFirstResult}" />
				<c:forEach
					items="#{relatedTopicTagsList.filterVars}"
					var="filtervar">
					<f:param
						name="#{filtervar.key}"
						value="#{filtervar.value}" />
				</c:forEach>
			</s:link>

		</div>

	</ui:define>

</ui:composition>
